// app/assets/stylesheets/components/_dropdown.scss

@import "../base/variables";

// Dropdown container for user menu
.user-dropdown {
  position: relative; // Positions dropdown content relative to toggle
  display: inline-block;

  // Toggle button for user dropdown (e.g., avatar + arrow)
  &-toggle {
    display: flex;
    align-items: center; // Centers avatar and arrow vertically
    gap: 0.5rem; // Space between avatar and arrow
    padding: 0.5rem; // Padding for clickable area
    background: none;
    border: none;
    cursor: pointer; // Indicates interactiveness
    color: $color-black; // Base color for toggle
    transition: $transition-base; // Smooth transition for color change

    &:hover {
      color: $color-accent; // Accent color on hover
    }

    // Avatar within the toggle
    .user-avatar {
      width: 32px;
      height: 32px;
      background-color: $color-light-grey; // Light grey background for default avatar
      border-radius: 50%; // Circle shape
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1rem; // Font size for initials or icon
      color: $color-grey; // Grey color for avatar text
    }

    // Arrow icon indicating dropdown state
    .dropdown-arrow {
      font-size: 0.8rem; // Smaller size for icon
      transition: transform 0.3s ease; // Rotation animation
    }

    // Rotates arrow when dropdown is expanded
    &[aria-expanded="true"] {
      .dropdown-arrow {
        transform: rotate(180deg); // Rotate arrow when open
      }
    }
  }

  // Dropdown menu content
  &-content {
    position: absolute;
    top: 100%; // Positions below the toggle
    right: 0; // Aligns to the right edge
    min-width: 200px; // Minimum width for menu items
    background-color: $color-white; // White background for contrast
    border: 1px solid $color-border; // Subtle border around menu
    border-radius: $border-radius-md; // Rounded corners
    box-shadow: $shadow-md; // Medium shadow for depth
    padding: 0.5rem 0; // Vertical padding for inner items
    margin-top: 0.5rem; // Space above dropdown
    opacity: 0;
    visibility: hidden; // Hidden by default
    transform: translateY(-10px); // Subtle slide-down animation
    transition: all 0.3s ease; // Smooth transition for opening
    z-index: $z-index-dropdown; // Layer above other content

    // Active class to show dropdown
    &.active {
      opacity: 1;
      visibility: visible;
      transform: translateY(0); // Drops into place
    }
  }
}

// Individual items within the dropdown
.dropdown-item {
  display: flex;
  align-items: center; // Centers icon and text
  gap: 0.5rem; // Space between icon and label
  padding: 0.75rem 1rem; // Padding for clickable area
  color: $color-black; // Base color for text
  text-decoration: none;
  transition: $transition-base; // Smooth color and background transition
  background: none;
  border: none;
  width: 100%; // Full width for easy clicking
  text-align: left; // Aligns text and icon to the left
  cursor: pointer;

  &:hover {
    background-color: $color-light-grey; // Highlight background on hover
    color: $color-accent; // Accent color for text on hover
  }

  .icon {
    font-size: 1.2rem; // Size for icons within items
  }

  // Error-styled dropdown item
  &.text-error {
    color: $color-error; // Error color for text

    &:hover {
      background-color: rgba($color-error, 0.1); // Light red on hover
    }
  }
}

// Divider line between dropdown items
.dropdown-divider {
  height: 1px;
  background-color: $color-border; // Border color for divider
  margin: 0.5rem 0; // Space above and below divider
}

// Responsive styling for smaller screens
@media (max-width: $breakpoint-md) {
  .user-dropdown {
    width: 100%;

    &-toggle {
      width: 100%; // Full width on small screens
      justify-content: space-between; // Spreads avatar and arrow
    }

    &-content {
      position: static; // Removes absolute positioning
      box-shadow: none; // Removes shadow for flat design
      border: none; // No border on small screens
      border-radius: 0; // Square edges
      margin-top: 0; // Removes top margin
      padding: 0; // No padding

      // Visible border top and bottom when expanded
      &.active {
        border-top: 1px solid $color-border;
        border-bottom: 1px solid $color-border;
      }
    }
  }
}

@use "sass:map";
@use "base/variables" as *;
@use "base/mixins" as *;

// ---------------------------------------------------------------
// VerseCraft Layout - Sophisticated Instagram-Inspired Design
// ---------------------------------------------------------------
// A refined layout inspired by Instagram, featuring a fixed navbar,
// responsive grid feed, and sidebar. Emphasis is on accessibility,
// subtle animations, and responsive design principles.
// ---------------------------------------------------------------

// Main Container
.container {
  display: flex;
  justify-content: center;
  padding-top: map.get($spacing, 'header');
  padding-left: map.get($spacing, 'page');
  padding-right: map.get($spacing, 'page');
  max-width: 1600px;
  margin: 0 auto;

  @include reduced-motion {
    scroll-behavior: auto;
  }
}

// Navigation Bar
.navbar {
  position: fixed;
  top: 0;
  width: 100%;
  height: 60px;
  background-color: map.get(map.get($color-schemes, 'light'), 'background', 'primary');
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0 map.get($spacing, '3');
  box-shadow: 0 1px 4px rgba(0, 0, 0, 0.1);
  z-index: 10;
  font-family: map.get($fonts, 'primary', 'family');

  .logo {
    font-size: map.get($type-scale, 'lg');
    font-weight: 600;
    letter-spacing: map.get($letter-spacing, 'tracked-tight');
    color: map.get(map.get($colors, 'ink'), 'deepest');
  }

  .icons {
    display: flex;
    gap: map.get($spacing, '2');

    .icon {
      font-size: map.get($type-scale, 'lg');
      cursor: pointer;
      color: map.get(map.get($colors, 'editorial'), 'base');
      transition: color map.get($durations, 'quick') map.get($easings, 'out');

      &:hover {
        color: map.get(map.get($colors, 'editorial'), 'dark');
      }

      @include focus-ring;
    }
  }
}

// Main Content Layout
.main {
  display: flex;
  width: 100%;
  max-width: 1200px;
  gap: map.get($spacing, '5');
  padding-top: map.get($spacing, '5');

  // Feed Section
  .feed {
    flex: 2;
    display: grid;
    gap: map.get($spacing, '4');
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    padding-top: map.get($spacing, '5');

    .post {
      background-color: map.get(map.get($color-schemes, 'light'), 'background', 'secondary');
      border: 1px solid map.get(map.get($colors, 'ink'), 'lightest');
      border-radius: 8px;
      overflow: hidden;
      box-shadow: map.get($shadows, 'sm');

      .image {
        width: 100%;
        height: auto;
        transition: transform map.get($durations, 'quick') map.get($easings, 'standard');

        &:hover {
          transform: scale(map.get($animation-scales, 'small'));
        }
      }

      .details {
        padding: map.get($spacing, '3');

        .username {
          font-weight: 600;
          font-size: map.get($type-scale, 'sm');
          color: map.get(map.get($colors, 'ink'), 'deepest');
        }

        .description {
          font-size: map.get($type-scale, 'xs');
          margin-top: map.get($spacing, '1');
          color: map.get(map.get($colors, 'ink'), 'base');
        }
      }
    }
  }

  // Poetry Layout Components
  .poem-container {
    max-width: map.get($poem-widths, 'standard');
    margin: 0 auto;
    padding: map.get($spacing, '6') map.get($spacing, '4');

    &--narrow {
      max-width: map.get($poem-widths, 'narrow');
    }

    &--wide {
      max-width: map.get($poem-widths, 'wide');
    }

    &--epic {
      max-width: map.get($poem-widths, 'epic');
    }

    .poem-header {
      margin-bottom: map.get($spacing, '6');

      .poem-title {
        @include font-style('2xl', 400, 'display', 'display');
        color: map.get(map.get($colors, 'ink'), 'deepest');
        margin-bottom: map.get($spacing, '3');
      }

      .poet-name {
        @include font-style('lg', 400, 'base', 'primary');
        color: map.get(map.get($colors, 'ink'), 'dark');
      }
    }

    .poem-content {
      position: relative;
      margin: map.get($spacing, '6') 0;
    }
  }

  // Annotation Layout
  .poem-annotations {
    position: absolute;
    right: calc(-1 * map.get($spacing, 'marginalia', 'width'));
    width: map.get($spacing, 'marginalia', 'width');
    font-size: map.get($type-scale, '2xs');
    color: map.get(map.get($colors, 'ink'), 'medium');
    padding-left: map.get($spacing, 'marginalia', 'gutter');

    @media (max-width: map.get($breakpoints, 'desktop')) {
      position: static;
      width: auto;
      padding-left: 0;
      margin-top: map.get($spacing, '4');
      border-top: 1px solid map.get(map.get($colors, 'ink'), 'lightest');
      padding-top: map.get($spacing, '4');
    }
  }

  // Sidebar Section
  .sidebar {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: map.get($spacing, '4');
    max-width: 300px;
    padding-top: map.get($spacing, '5');

    .profile {
      display: flex;
      align-items: center;
      gap: map.get($spacing, '2');
      padding: map.get($spacing, '3');
      background-color: map.get(map.get($color-schemes, 'light'), 'background', 'secondary');
      border-radius: 8px;
      box-shadow: map.get($shadows, 'sm');

      .avatar {
        width: 50px;
        height: 50px;
        border-radius: 50%;
        background-color: map.get(map.get($colors, 'ink'), 'light');
      }

      .username {
        font-weight: 600;
        font-size: map.get($type-scale, 'sm');
        color: map.get(map.get($colors, 'ink'), 'darkest');
      }
    }

    .suggestions, .links {
      padding: map.get($spacing, '3');
      background-color: map.get(map.get($color-schemes, 'light'), 'background', 'secondary');
      border-radius: 8px;
      box-shadow: map.get($shadows, 'sm');

      .title {
        font-weight: 600;
        font-size: map.get($type-scale, 'xs');
        margin-bottom: map.get($spacing, '2');
        color: map.get(map.get($colors, 'ink'), 'darker');
      }

      .item {
        font-size: map.get($type-scale, 'xs');
        margin-top: map.get($spacing, '1');
        color: map.get(map.get($colors, 'ink'), 'base');
        cursor: pointer;

        &:hover {
          text-decoration: underline;
          color: map.get(map.get($colors, 'ink'), 'dark');
        }
      }
    }
  }
}

// Responsive Adjustments
@media (max-width: map.get($breakpoints, 'tablet')) {
  .container {
    flex-direction: column;
    padding: 0;
  }

  .navbar {
    height: 50px;
    .logo {
      font-size: map.get($type-scale, 'md');
    }
  }

  .main {
    flex-direction: column;

    .feed {
      grid-template-columns: 1fr;
    }

    .sidebar {
      max-width: 100%;
      .profile, .suggestions, .links {
        padding: map.get($spacing, '2');
      }
    }
  }
}
